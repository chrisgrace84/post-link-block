(()=>{"use strict";var e,t={168:()=>{const e=window.wp.blocks;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,r,n){return(r=function(e){var r=function(e){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}const n=window.wp.i18n,o=window.wp.blockEditor,i=window.wp.components,s=window.wp.element,c=JSON.parse('{"UU":"custom-block/post-link-block","KR":"post-link-block"}'),l=window.ReactJSXRuntime,a=["className"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:t}){var r;const u=(0,o.useBlockProps)(),{className:f}=u,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(u,a),{selectedPost:d}=e,[y,O]=(0,s.useState)([]),[v,h]=(0,s.useState)(1),[j,m]=(0,s.useState)(1),[w,g]=(0,s.useState)(!0),[P,k]=(0,s.useState)(""),S=async(e,t)=>{try{var r;let n=`${(null===(r=window.wpApiSettings)||void 0===r?void 0:r.root)||"/wp-json/"}wp/v2/posts?status=publish&per_page=5&page=${e}`;t&&/^\d+$/.test(t)?n+=`&include=${t}`:P&&(n+=`&search=${encodeURIComponent(t)}`);const o=await fetch(n);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const i=await o.json();O(i);const s=o.headers.get("X-WP-TotalPages");m(Number(s)||1)}catch(e){console.error("Error fetching posts:",e),O([])}finally{g(!1)}};(0,s.useEffect)(()=>{S(v,P)},[v]),(0,s.useEffect)(()=>{let e;return e=setTimeout(()=>{h(1),S(v,P)},400),()=>clearTimeout(e)},[P]);const x=y.map(e=>({label:e.title.rendered,value:e.id.toString()}));return(0,l.jsxs)(l.Fragment,{children:[d&&(0,l.jsx)("p",p(p({className:`${f} dmg-read-more`},b),{},{children:(0,l.jsxs)("a",{href:d.link,children:[(0,n.__)("Read More: ",c.KR),d.title.rendered]})})),(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(i.PanelBody,{title:(0,n.__)(`Post Links ${c.KR}`,c.KR),className:"post-links-block-panel",children:[(0,l.jsx)(i.TextControl,{label:(0,n.__)("Search Post ID or Title",c.KR),value:P,onChange:e=>k(e),placeholder:"Type here..."}),w?(0,l.jsx)(i.Spinner,{}):(0,l.jsx)(l.Fragment,{children:y.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.MenuItemsChoice,{choices:x,value:(null==d||null===(r=d.id)||void 0===r?void 0:r.toString())||"",onSelect:e=>{const r=y.find(t=>t.id===parseInt(e,10));t({selectedPost:r||null})}}),j>1&&(0,l.jsxs)("div",{className:"post-links-block-panel__pagination",children:[(0,l.jsx)(i.Button,{disabled:v<=1,onClick:()=>h(v-1),children:(0,n.__)("Previous",c.KR)}),(0,l.jsx)("span",{children:`${v} ${(0,n.__)("of",c.KR)} ${j}`}),(0,l.jsx)(i.Button,{disabled:v>=j,onClick:()=>h(v+1),children:(0,n.__)("Next",c.KR)})]})]}):(0,l.jsx)("p",{children:(0,n.__)("No posts founds",c.KR)})})]})})]})},save:function(){return(0,l.jsx)("p",b(b({},o.useBlockProps.save()),{},{children:"Post Link Block â€“ hello from the saved content!"}))}})}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,r,o,i)=>{if(!r){var s=1/0;for(u=0;u<e.length;u++){for(var[r,o,i]=e[u],c=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every(e=>n.O[e](r[l]))?r.splice(l--,1):(c=!1,i<s&&(s=i));if(c){e.splice(u--,1);var a=o();void 0!==a&&(t=a)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[s,c,l]=r,a=0;if(s.some(t=>0!==e[t])){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var u=l(n)}for(t&&t(r);a<s.length;a++)i=s[a],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self.webpackChunkpost_link_block=self.webpackChunkpost_link_block||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[350],()=>n(168));o=n.O(o)})();